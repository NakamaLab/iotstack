#
# Docs: https://mosquitto.org/man/mosquitto-conf-5.html

listener  1883
log_dest stdout
log_type all
allow_anonymous true
persistence true
persistence_location /var/lib/mosquitto/
per_listener_settings false



auth_plugin /mosquitto/go-auth.so
auth_opt_backends postgres

auth_opt_pg_host postgres
auth_opt_pg_sslmode disable
auth_opt_pg_user iot
auth_opt_pg_userquery iot
auth_opt_pg_password 9Wa5mPy4Ir3
auth_opt_pg_dbname iot

###### ENABLE WS ######
listener 9001
protocol websockets
#capath /etc/ssl/certs
#certfile /var/lib/mosquitto/fullchain.pem
#keyfile /var/lib/mosquitto/privkey.pem
#require_certificate false

###### ENABLE TLS ######
#listener 8883
#protocol mqtt
#capath /etc/ssl/certs
#certfile /var/lib/mosquitto/fullchain.pem
#keyfile /var/lib/mosquitto/privkey.pem
#require_certificate false
